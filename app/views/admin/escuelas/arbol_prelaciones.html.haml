= link_to escuela_path(@escuela), class: 'btn btn-outline-success btn-sm tooltip-btn', 'data-toggle': :tooltip, title: "Ir a #{@escuela.descripcion}"  do
  = glyph 'chevron-left'
  Atr√°s
.btn.btn-sm.btn-success.ml-2
  Desplegar todos
  = link_to 'javascript:void(0)', onclick: "$('.arbol').toggleClass('d-none'); $(this).toggleClass('gly-rotate-90');" do
    = glyph 'chevron-right'

%table.table.mt-3.border{style: 'height:100px;'}
  %thead
    %tr.text-center
      - @annos.each do |k,v| 
        %th
          - if k.nil?
            = "Sin Orden"
          - elsif k.eql? 0
            ="Optativas"
          - else
            = "#{ordinalize_es(k)} "
          %span.badge.badge-dark= "Total #{v}"


  %tbody
    %tr
      - @annos.each do |k,v| 
        %td
          %table.table.table-sm{style: 'overflow-y: scroll;'}
            %thead
            %tbody
              - asignaturas = @asignaturas.where(anno: k)
              - asignaturas.each do |asig| 
                %tr
                  %td
                    = simple_toggle asignatura_path(asig), nil, "Ir al detalle de " + asig.descripcion, :primary, 'zoom-in'
                    %b= asig.descripcion_id
                    - if asig.dependencias.any?
                      = link_to 'javascript:void(0)', onclick: "$('#arbol#{asig.id}').toggleClass('d-none'); $(this).toggleClass('gly-rotate-90');" do
                        = glyph 'chevron-right'
                      %div{id: "arbol#{asig.id}", class: 'd-none arbol'}
                        %table.table-striped.table-hover.table-bordered.ml-2
                          %tbody
                            - asig.dependencias.each do |dep|
                              %tr
                                %td
                                  = simple_toggle asignatura_path(asig), nil, "Ir al detalle de " + asig.descripcion, :primary, 'zoom-in'
                                  = dep.asignatura_dependiente.descripcion_id

