.mt-3= render '/admin/asignaturas/descripcion_general'

%nav
  .nav.nav-tabs
    - active_depend = ''
    - active_default = 'active show'

    - if params[:dependencias]
      - active_depend = 'active show'
      - active_default = ''

    - if @secciones.any?
      = link_to 'Periodo Actual', "#seccionesActual", "data-toggle": :tab, class: "nav-item nav-link #{active_default}"
    - if (current_admin and current_admin.autorizado? 'Dependencias', 'index')
      = link_to 'Prelaciones', "#dependencias", "data-toggle": :tab, class: "nav-item nav-link #{active_depend}"
    - if @asignatura.secciones.any?
      = link_to 'Histórico de secciones', "#secciones", "data-toggle": :tab, class: "nav-item nav-link"
    - if @bitacoras.any? and (current_admin.autorizado? 'Bitacoras', 'index')
      = link_to 'Bitácora', "#bitacora", "data-toggle": :tab, class: "nav-item nav-link"
  .tab-content
    - if @secciones.any?
      #seccionesActual{class: "tab-pane #{active_default}"}
        .row
          .col-md-7
            %h6.titulo.m-2 Secciones:
            = render partial: '/admin/secciones/index_to_asinatura', locals: {secciones: @secciones, historico: false}

          .col-md-5
            = render '/admin/horarios/horario_secciones'
    - if (current_admin and current_admin.autorizado? 'Dependencias', 'index')
      #dependencias{class: "tab-pane #{active_depend}"}
        = render template: '/admin/dependencias/index'
    - if @asignatura.secciones.any?
      .tab-pane#secciones
        = render partial: '/admin/secciones/index_to_asinatura', locals: {secciones: @asignatura.secciones.where("periodo_id != '#{current_periodo.id}'").order(periodo_id: :desc).limit(5), historico: true}
    - if @bitacoras.any? and (current_admin.autorizado? 'Bitacoras', 'index')

      .tab-pane#bitacora
        = render file: '/admin/bitacoras/index' 

= render '/admin/secciones/modal_seleccionar_profesor'


:javascript
  
  //function paintTimeSlots()

  let aux;
  $( ".conHorario" ).hover(
    function() {
      let id = $( this ).attr('id')
      $('.jqs-period-info').fadeOut( 1 );

      aux = $('#bloquesHorarios')[0].innerHTML
      // $('.jqs-period-info').filter(function(){return this.innerText.includes(id)}).fadeIn( 1 );
      $('.jqs-period-info').each(function(){
        if(this.innerText.includes(id)){
          $(this).find('br').remove()
          $(this).find('.profDesc').removeClass('d-none');
          $(this).fadeIn( 1 );
        }
      })
    }, function() {
      $('#bloquesHorarios')[0].innerHTML = aux
      $('.profDesc').addClass('d-none');
      $('.jqs-period-info').fadeIn( 1 );
    }
  );